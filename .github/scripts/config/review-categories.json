{
  "review": {
    "categories": [
      {
        "id": "security",
        "name": "安全审查",
        "description": "检查安全漏洞和潜在风险",
        "severity": "critical",
        "prompt_template": "从安全角度审查以下代码变更：\n\n重点关注：\n- SQL 注入、XSS、CSRF 等常见漏洞\n- 敏感信息泄露（密钥、密码、token）\n- 权限检查和身份验证\n- 输入验证和数据清理\n- 不安全的依赖或 API 使用\n\n代码：\n{diff}"
      },
      {
        "id": "bugs",
        "name": "潜在 Bug",
        "description": "检查可能导致运行时错误的问题",
        "severity": "error",
        "prompt_template": "从 Bug 识别角度审查以下代码：\n\n重点关注：\n- 空指针/未定义引用\n- 边界条件和异常处理\n- 竞态条件和并发问题\n- 内存泄漏和资源管理\n- 类型不匹配和转换错误\n\n代码：\n{diff}"
      },
      {
        "id": "react_inline_styles",
        "name": "React - 避免内联样式",
        "description": "检查是否使用了内联 style 属性",
        "severity": "warning",
        "prompt_template": "检查以下代码中的内联样式：\n\n**问题**: 内联 style 对象会在每次渲染时创建新对象，影响性能且无法被浏览器优化。\n\n**查找**: `style={{ ... }}` 或 `style=\"...\"`\n\n**修复方案**: 使用 Tailwind CSS 类或 CSS Modules\n\n代码：\n{diff}"
      },
      {
        "id": "react_emojis",
        "name": "React - 避免使用 Emoji",
        "description": "检查是否在 UI 中使用了 emoji",
        "severity": "info",
        "prompt_template": "检查以下代码中的 emoji 使用：\n\n**问题**: Emoji 在不同平台渲染不一致，可访问性差，国际化问题。\n\n**查找**: 任何 emoji 字符（🚀、✅、❌ 等）\n\n**修复方案**: 使用图标库（lucide-react、heroicons 等）\n\n代码：\n{diff}"
      },
      {
        "id": "react_performance",
        "name": "React - 性能优化",
        "description": "React 性能最佳实践",
        "severity": "warning",
        "prompt_template": "从 React 性能角度审查代码：\n\n**检查项**:\n- 不必要的 useEffect 依赖\n- 缺少 useMemo/useCallback 的优化\n- 组件未使用 React.memo 但频繁重渲染\n- 列表渲染缺少 key 或 key 使用不当\n- 在渲染中创建新函数/对象\n- 大型组件未拆分\n- 使用内联函数作为 props\n\n代码：\n{diff}"
      },
      {
        "id": "react_hooks",
        "name": "React - Hooks 最佳实践",
        "description": "React Hooks 使用规范",
        "severity": "warning",
        "prompt_template": "检查 React Hooks 使用：\n\n**检查项**:\n- useEffect 缺少依赖或依赖过多\n- 在条件/循环中使用 hooks\n- 自定义 hook 没有以 use 开头\n- useState 初始值计算昂贵但未使用函数初始化\n- 过时的闭包问题\n\n代码：\n{diff}"
      },
      {
        "id": "react_accessibility",
        "name": "React - 可访问性",
        "description": "React 组件可访问性检查",
        "severity": "warning",
        "prompt_template": "检查 React 组件的可访问性：\n\n**检查项**:\n- 交互元素缺少 aria-label\n- 图片缺少 alt 属性\n- 颜色对比度不足\n- 键盘导航支持\n- focus 状态可见\n- 语义化 HTML 使用\n- 跳过导航链接\n\n代码：\n{diff}"
      },
      {
        "id": "typescript",
        "name": "TypeScript 类型",
        "description": "TypeScript 类型安全和最佳实践",
        "severity": "info",
        "prompt_template": "从 TypeScript 类型安全角度审查以下代码：\n\n**检查项**:\n- 类型定义是否完整准确\n- 避免使用 any\n- 正确使用泛型\n- 类型断言是否必要\n- 接口和类型定义的合理性\n- 使用 unknown 代替 any\n- 严格的 null 检查\n\n代码：\n{diff}"
      },
      {
        "id": "code_quality",
        "name": "代码质量",
        "description": "检查代码质量和最佳实践",
        "severity": "info",
        "prompt_template": "从代码质量角度审查以下代码：\n\n**检查项**:\n- 命名规范和可读性\n- 代码重复和 DRY 原则\n- 函数复杂度和职责分离\n- 错误处理机制\n- 魔法数字和常量提取\n- 函数参数数量（建议不超过 4 个）\n\n代码：\n{diff}"
      },
      {
        "id": "performance",
        "name": "性能分析",
        "description": "检查性能问题和优化机会",
        "severity": "warning",
        "prompt_template": "从性能角度审查以下代码：\n\n**检查项**:\n- 算法复杂度和效率\n- 不必要的循环或计算\n- 内存使用和优化机会\n- 数据库查询效率（N+1 问题）\n- 缓存机会\n- 大文件处理优化\n\n代码：\n{diff}"
      },
      {
        "id": "testing",
        "name": "测试覆盖",
        "description": "检查测试覆盖率和质量",
        "severity": "info",
        "prompt_template": "从测试角度审查以下代码：\n\n**检查项**:\n- 是否缺少必要的测试\n- 测试用例的完整性\n- 边界条件是否被测试\n- 错误路径是否被覆盖\n- 测试的可维护性\n\n代码：\n{diff}"
      }
    ]
  },
  "system_prompt": "你是一个严格的专业代码审查 AI 助手。\n\n**核心原则**：\n1. 只指出真正的问题，不需要夸奖或表扬\n2. 每个问题必须提供符合行业最佳实践的具体修复方案\n3. 使用 file:line 格式精确引用问题代码\n4. 用简洁的中文回复\n\n**输出要求**：\n- 对于每个问题，必须同时提供「错误代码」和「正确代码」对比\n- 引用相关官方文档或行业标准\n- 每个修复方案必须可以直接复制使用\n\n**输出格式**：\n```markdown\n## 发现的问题 (共 N 个)\n\n### [严重级别] 问题标题\n- **位置**: `src/file.ts:42`\n- **问题**: [具体描述问题]\n\n**❌ 错误代码**:\n```tsx\n[从 diff 中提取的问题代码]\n```\n\n**✅ 正确代码**:\n```tsx\n[修复后的代码，可直接复制使用]\n```\n\n**理由**: [解释为什么这样是最佳实践，引用相关文档]\n\n---\n\n## 总体建议\n[整体性的架构或流程建议]\n```"
}
